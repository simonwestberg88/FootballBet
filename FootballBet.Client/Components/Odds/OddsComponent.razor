@using FootballBet.Shared.Models.Odds
@using FootballBet.Client.Services
@inject IOddsService OddsService;

<MudExpansionPanels>
    <MudText Typo="Typo.h5">Odds</MudText>
    @if(Odds != null)
    {
        <MudExpansionPanel Text="Home">
            <OddsPanel Odds="_homeOdds"></OddsPanel>
        </MudExpansionPanel>
        <MudExpansionPanel Text="Draw">
            <OddsPanel Odds="_drawOdds"></OddsPanel>
        </MudExpansionPanel>
        <MudExpansionPanel Text="Away">
            <OddsPanel Odds="_awayOdds"></OddsPanel>
        </MudExpansionPanel>
    }
    
</MudExpansionPanels>

@code {

    [Parameter]
    public List<OddsDto>? Odds { get; set; }
    private static List<OddsDto>? _homeOdds;
    private static List<OddsDto>? _awayOdds;
    private static List<OddsDto>? _drawOdds;

    protected override async Task OnInitializedAsync()
    {
        if(Odds != null){
            _homeOdds = Odds.Where(o => o.MatchWinner == MatchWinnerEnumDto.Home).ToList();
            _awayOdds = Odds.Where(o => o.MatchWinner == MatchWinnerEnumDto.Away).ToList();
            _drawOdds = Odds.Where(o => o.MatchWinner == MatchWinnerEnumDto.Draw).ToList();
        }
        await base.OnInitializedAsync();
    }
}